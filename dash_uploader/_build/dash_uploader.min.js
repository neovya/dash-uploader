/*! For license information please see dash_uploader.min.js.LICENSE.txt */
(()=>{var e={268:(e,t,s)=>{var i;e=s.nmd(e),function(s,r,n){"use strict";if(s&&r){var o=s.navigator.msPointerEnabled;a.prototype={on:function(e,t){e=e.toLowerCase(),this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},off:function(e,t){var s,i,r;e!==n?(e=e.toLowerCase(),t!==n?this.events.hasOwnProperty(e)&&(i=t,(r=(s=this.events[e]).indexOf(i))>-1&&s.splice(r,1)):delete this.events[e]):this.events={}},fire:function(e,t){t=Array.prototype.slice.call(arguments),e=e.toLowerCase();var s=!1;return this.events.hasOwnProperty(e)&&h(this.events[e],(function(e){s=!1===e.apply(this,t.slice(1))||s}),this),"catchall"!=e&&(t.unshift("catchAll"),s=!1===this.fire.apply(this,t)||s),!s},webkitReadDataTransfer:function(e){var t=this,s=e.dataTransfer.items.length,i=[];function r(e){e.readEntries((function(t){t.length?(s+=t.length,h(t,(function(e){if(e.isFile){var t=e.fullPath;e.file((function(e){n(e,t)}),o)}else e.isDirectory&&r(e.createReader())})),r(e)):a()}),o)}function n(e,t){e.relativePath=t.substring(1),i.push(e),a()}function o(e){throw a(),e}function a(){0==--s&&t.addFiles(i,e)}h(e.dataTransfer.items,(function(e){var t=e.webkitGetAsEntry();t?t.isFile?n(e.getAsFile(),t.fullPath):r(t.createReader()):a()}))},generateUniqueIdentifier:function(e){var t=this.opts.generateUniqueIdentifier;if("function"==typeof t)return t(e);var s=e.relativePath||e.webkitRelativePath||e.fileName||e.name;return e.size+"-"+s.replace(/[^0-9a-zA-Z_-]/gim,"")},uploadNextChunk:function(e){var t=!1;if(this.opts.prioritizeFirstAndLastChunk&&(h(this.files,(function(e){return!e.paused&&e.chunks.length&&"pending"===e.chunks[0].status()?(e.chunks[0].send(),t=!0,!1):!e.paused&&e.chunks.length>1&&"pending"===e.chunks[e.chunks.length-1].status()?(e.chunks[e.chunks.length-1].send(),t=!0,!1):void 0})),t))return t;if(h(this.files,(function(e){if(e.paused||h(e.chunks,(function(e){if("pending"===e.status())return e.send(),t=!0,!1})),t)return!1})),t)return!0;var s=!1;return h(this.files,(function(e){if(!e.isComplete())return s=!0,!1})),s||e||f((function(){this.fire("complete")}),this),!1},assignBrowse:function(e,t,s,i){e instanceof Element&&(e=[e]),h(e,(function(e){var n;"INPUT"===e.tagName&&"file"===e.type?n=e:((n=r.createElement("input")).setAttribute("type","file"),d(n.style,{visibility:"hidden",position:"absolute",width:"1px",height:"1px"}),e.appendChild(n),e.addEventListener("click",(function(){n.click()}),!1)),this.opts.singleFile||s||n.setAttribute("multiple","multiple"),t&&n.setAttribute("webkitdirectory","webkitdirectory"),h(i,(function(e,t){n.setAttribute(t,e)}));var o=this;n.addEventListener("change",(function(e){e.target.value&&(o.addFiles(e.target.files,e),e.target.value="")}),!1)}),this)},assignDrop:function(e){void 0===e.length&&(e=[e]),h(e,(function(e){e.addEventListener("dragover",this.preventEvent,!1),e.addEventListener("dragenter",this.preventEvent,!1),e.addEventListener("drop",this.onDrop,!1)}),this)},unAssignDrop:function(e){void 0===e.length&&(e=[e]),h(e,(function(e){e.removeEventListener("dragover",this.preventEvent),e.removeEventListener("dragenter",this.preventEvent),e.removeEventListener("drop",this.onDrop)}),this)},isUploading:function(){var e=!1;return h(this.files,(function(t){if(t.isUploading())return e=!0,!1})),e},_shouldUploadNext:function(){var e=0,t=!0,s=this.opts.simultaneousUploads;return h(this.files,(function(i){h(i.chunks,(function(i){if("uploading"===i.status()&&++e>=s)return t=!1,!1}))})),t&&e},upload:function(){var e=this._shouldUploadNext();if(!1!==e){this.fire("uploadStart");for(var t=!1,s=1;s<=this.opts.simultaneousUploads-e;s++)t=this.uploadNextChunk(!0)||t;t||f((function(){this.fire("complete")}),this)}},resume:function(){h(this.files,(function(e){e.isComplete()||e.resume()}))},pause:function(){h(this.files,(function(e){e.pause()}))},cancel:function(){for(var e=this.files.length-1;e>=0;e--)this.files[e].cancel()},progress:function(){var e=0,t=0;return h(this.files,(function(s){e+=s.progress()*s.size,t+=s.size})),t>0?e/t:0},addFile:function(e,t){this.addFiles([e],t)},addFiles:function(e,t){var s=[];h(e,(function(e){if((!o||o&&e.size>0)&&(e.size%4096!=0||"."!==e.name&&"."!==e.fileName)){var i=this.generateUniqueIdentifier(e);if(this.opts.allowDuplicateUploads||!this.getFromUniqueIdentifier(i)){var r=new l(this,e,i);this.fire("fileAdded",r,t)&&s.push(r)}}}),this),this.fire("filesAdded",s,t)&&(h(s,(function(e){this.opts.singleFile&&this.files.length>0&&this.removeFile(this.files[0]),this.files.push(e)}),this),this.fire("filesSubmitted",s,t))},removeFile:function(e){for(var t=this.files.length-1;t>=0;t--)this.files[t]===e&&(this.files.splice(t,1),e.abort(),this.fire("fileRemoved",e))},getFromUniqueIdentifier:function(e){var t=!1;return h(this.files,(function(s){s.uniqueIdentifier===e&&(t=s)})),t},getSize:function(){var e=0;return h(this.files,(function(t){e+=t.size})),e},sizeUploaded:function(){var e=0;return h(this.files,(function(t){e+=t.sizeUploaded()})),e},timeRemaining:function(){var e=0,t=0;return h(this.files,(function(s){s.paused||s.error||(e+=s.size-s.sizeUploaded(),t+=s.averageSpeed)})),e&&!t?Number.POSITIVE_INFINITY:e||t?Math.floor(e/t):0}},l.prototype={measureSpeed:function(){var e=Date.now()-this._lastProgressCallback;if(e){var t=this.flowObj.opts.speedSmoothingFactor,s=this.sizeUploaded();this.currentSpeed=Math.max((s-this._prevUploadedSize)/e*1e3,0),this.averageSpeed=t*this.currentSpeed+(1-t)*this.averageSpeed,this._prevUploadedSize=s}},chunkEvent:function(e,t,s){switch(t){case"progress":if(Date.now()-this._lastProgressCallback<this.flowObj.opts.progressCallbacksInterval)break;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now();break;case"error":this.error=!0,this.abort(!0),this.flowObj.fire("fileError",this,s,e),this.flowObj.fire("error",s,this,e);break;case"success":if(this.error)return;this.measureSpeed(),this.flowObj.fire("fileProgress",this,e),this.flowObj.fire("progress"),this._lastProgressCallback=Date.now(),this.isComplete()&&(this.currentSpeed=0,this.averageSpeed=0,this.flowObj.fire("fileSuccess",this,s,e));break;case"retry":this.flowObj.fire("fileRetry",this,e)}},pause:function(){this.paused=!0,this.abort()},resume:function(){this.paused=!1,this.flowObj.upload()},abort:function(e){this.currentSpeed=0,this.averageSpeed=0;var t=this.chunks;e&&(this.chunks=[]),h(t,(function(e){"uploading"===e.status()&&(e.abort(),this.flowObj.uploadNextChunk())}),this)},cancel:function(){this.flowObj.removeFile(this)},retry:function(){this.bootstrap(),this.flowObj.upload()},bootstrap:function(){"function"==typeof this.flowObj.opts.initFileFn&&this.flowObj.opts.initFileFn(this),this.abort(!0),this.error=!1,this._prevProgress=0;var e=this.flowObj.opts.forceChunkSize?Math.ceil:Math.floor;this.chunkSize=c(this.flowObj.opts.chunkSize,this);for(var t=Math.max(e(this.size/this.chunkSize),1),s=0;s<t;s++)this.chunks.push(new p(this.flowObj,this,s))},progress:function(){if(this.error)return 1;if(1===this.chunks.length)return this._prevProgress=Math.max(this._prevProgress,this.chunks[0].progress()),this._prevProgress;var e=0;h(this.chunks,(function(t){e+=t.progress()*(t.endByte-t.startByte)}));var t=e/this.size;return this._prevProgress=Math.max(this._prevProgress,t>.9999?1:t),this._prevProgress},isUploading:function(){var e=!1;return h(this.chunks,(function(t){if("uploading"===t.status())return e=!0,!1})),e},isComplete:function(){var e=!1;return h(this.chunks,(function(t){var s=t.status();if("pending"===s||"uploading"===s||"reading"===s||1===t.preprocessState||1===t.readState)return e=!0,!1})),!e},sizeUploaded:function(){var e=0;return h(this.chunks,(function(t){e+=t.sizeUploaded()})),e},timeRemaining:function(){if(this.paused||this.error)return 0;var e=this.size-this.sizeUploaded();return e&&!this.averageSpeed?Number.POSITIVE_INFINITY:e||this.averageSpeed?Math.floor(e/this.averageSpeed):0},getType:function(){return this.file.type&&this.file.type.split("/")[1]},getExtension:function(){return this.name.substr(2+(~-this.name.lastIndexOf(".")>>>0)).toLowerCase()}},p.prototype={getParams:function(){return{flowChunkNumber:this.offset+1,flowChunkSize:this.chunkSize,flowCurrentChunkSize:this.endByte-this.startByte,flowTotalSize:this.fileObj.size,flowIdentifier:this.fileObj.uniqueIdentifier,flowFilename:this.fileObj.name,flowRelativePath:this.fileObj.relativePath,flowTotalChunks:this.fileObj.chunks.length}},getTarget:function(e,t){return 0==t.length?e:(e.indexOf("?")<0?e+="?":e+="&",e+t.join("&"))},test:function(){this.xhr=new XMLHttpRequest,this.xhr.addEventListener("load",this.testHandler,!1),this.xhr.addEventListener("error",this.testHandler,!1);var e=c(this.flowObj.opts.testMethod,this.fileObj,this),t=this.prepareXhrRequest(e,!0);this.xhr.send(t)},preprocessFinished:function(){this.endByte=this.computeEndByte(),this.preprocessState=2,this.send()},readFinished:function(e){this.readState=2,this.bytes=e,this.send()},send:function(){var e=this.flowObj.opts.preprocess,t=this.flowObj.opts.readFileFn;if("function"==typeof e)switch(this.preprocessState){case 0:return this.preprocessState=1,void e(this);case 1:return}switch(this.readState){case 0:return this.readState=1,void t(this.fileObj,this.startByte,this.endByte,this.fileObj.file.type,this);case 1:return}if(!this.flowObj.opts.testChunks||this.tested){this.loaded=0,this.total=0,this.pendingRetry=!1,this.xhr=new XMLHttpRequest,this.xhr.upload.addEventListener("progress",this.progressHandler,!1),this.xhr.addEventListener("load",this.doneHandler,!1),this.xhr.addEventListener("error",this.doneHandler,!1);var s=c(this.flowObj.opts.uploadMethod,this.fileObj,this),i=this.prepareXhrRequest(s,!1,this.flowObj.opts.method,this.bytes),r=this.flowObj.opts.changeRawDataBeforeSend;"function"==typeof r&&(i=r(this,i)),this.xhr.send(i)}else this.test()},abort:function(){var e=this.xhr;this.xhr=null,e&&e.abort()},status:function(e){return 1===this.readState?"reading":this.pendingRetry||1===this.preprocessState?"uploading":this.xhr?this.xhr.readyState<4?"uploading":this.flowObj.opts.successStatuses.indexOf(this.xhr.status)>-1?"success":this.flowObj.opts.permanentErrors.indexOf(this.xhr.status)>-1||!e&&this.retries>=this.flowObj.opts.maxChunkRetries?"error":(this.abort(),"pending"):"pending"},message:function(){return this.xhr?this.xhr.responseText:""},progress:function(){if(this.pendingRetry)return 0;var e=this.status();return"success"===e||"error"===e?1:"pending"===e?0:this.total>0?this.loaded/this.total:0},sizeUploaded:function(){var e=this.endByte-this.startByte;return"success"!==this.status()&&(e=this.progress()*e),e},prepareXhrRequest:function(e,t,s,i){var r=c(this.flowObj.opts.query,this.fileObj,this,t);r=d(r||{},this.getParams());var n=c(this.flowObj.opts.target,this.fileObj,this,t),o=null;if("GET"===e||"octet"===s){var a=[];h(r,(function(e,t){a.push([encodeURIComponent(t),encodeURIComponent(e)].join("="))})),n=this.getTarget(n,a),o=i||null}else o=new FormData,h(r,(function(e,t){o.append(t,e)})),void 0!==i&&o.append(this.flowObj.opts.fileParameterName,i,this.filename||this.fileObj.file.name);return this.xhr.open(e,n,!0),this.xhr.withCredentials=this.flowObj.opts.withCredentials,h(c(this.flowObj.opts.headers,this.fileObj,this,t),(function(e,t){this.xhr.setRequestHeader(t,e)}),this),o}},a.evalOpts=c,a.extend=d,a.each=h,a.FlowFile=l,a.FlowChunk=p,a.version="<%= version %>",e&&"object"==typeof e.exports?e.exports=a:(s.Flow=a,(i=function(){return a}.apply(t,[]))===n||(e.exports=i))}else console.warn("Flowjs needs window and document objects to work");function a(e){if(this.support=!("undefined"==typeof File||"undefined"==typeof Blob||"undefined"==typeof FileList||!Blob.prototype.slice&&!Blob.prototype.webkitSlice&&!Blob.prototype.mozSlice),this.support){this.supportDirectory=/Chrome/.test(s.navigator.userAgent)||/Firefox/.test(s.navigator.userAgent)||/Edge/.test(s.navigator.userAgent),this.files=[],this.defaults={chunkSize:1048576,forceChunkSize:!1,simultaneousUploads:3,singleFile:!1,fileParameterName:"file",progressCallbacksInterval:500,speedSmoothingFactor:.1,query:{},headers:{},withCredentials:!1,preprocess:null,changeRawDataBeforeSend:null,method:"multipart",testMethod:"GET",uploadMethod:"POST",prioritizeFirstAndLastChunk:!1,allowDuplicateUploads:!1,target:"/",testChunks:!0,generateUniqueIdentifier:null,maxChunkRetries:0,chunkRetryInterval:null,permanentErrors:[404,413,415,500,501],successStatuses:[200,201,202],onDropStopPropagation:!1,initFileFn:null,readFileFn:u},this.opts={},this.events={};var t=this;this.onDrop=function(e){t.opts.onDropStopPropagation&&e.stopPropagation(),e.preventDefault();var s=e.dataTransfer;s.items&&s.items[0]&&s.items[0].webkitGetAsEntry?t.webkitReadDataTransfer(e):t.addFiles(s.files,e)},this.preventEvent=function(e){e.preventDefault()},this.opts=a.extend({},this.defaults,e||{})}}function l(e,t,s){this.flowObj=e,this.bytes=null,this.file=t,this.name=t.fileName||t.name,this.size=t.size,this.relativePath=t.relativePath||t.webkitRelativePath||this.name,this.uniqueIdentifier=s===n?e.generateUniqueIdentifier(t):s,this.chunkSize=0,this.chunks=[],this.paused=!1,this.error=!1,this.averageSpeed=0,this.currentSpeed=0,this._lastProgressCallback=Date.now(),this._prevUploadedSize=0,this._prevProgress=0,this.bootstrap()}function u(e,t,s,i,r){var n="slice";e.file.slice?n="slice":e.file.mozSlice?n="mozSlice":e.file.webkitSlice&&(n="webkitSlice"),r.readFinished(e.file[n](t,s,i))}function p(e,t,s){this.flowObj=e,this.fileObj=t,this.offset=s,this.tested=!1,this.retries=0,this.pendingRetry=!1,this.preprocessState=0,this.readState=0,this.loaded=0,this.total=0,this.chunkSize=this.fileObj.chunkSize,this.startByte=this.offset*this.chunkSize,this.filename=null,this.computeEndByte=function(){var e=Math.min(this.fileObj.size,(this.offset+1)*this.chunkSize);return this.fileObj.size-e<this.chunkSize&&!this.flowObj.opts.forceChunkSize&&(e=this.fileObj.size),e},this.endByte=this.computeEndByte(),this.xhr=null;var i=this;this.event=function(e,t){(t=Array.prototype.slice.call(arguments)).unshift(i),i.fileObj.chunkEvent.apply(i.fileObj,t)},this.progressHandler=function(e){e.lengthComputable&&(i.loaded=e.loaded,i.total=e.total),i.event("progress",e)},this.testHandler=function(e){var t=i.status(!0);"error"===t?(i.event(t,i.message()),i.flowObj.uploadNextChunk()):"success"===t?(i.tested=!0,i.event(t,i.message()),i.flowObj.uploadNextChunk()):i.fileObj.paused||(i.tested=!0,i.send())},this.doneHandler=function(e){var t=i.status();if("success"===t||"error"===t)delete this.data,i.event(t,i.message()),i.flowObj.uploadNextChunk();else if(!i.fileObj.paused){i.event("retry",i.message()),i.pendingRetry=!0,i.abort(),i.retries++;var s=i.flowObj.opts.chunkRetryInterval;null!==s?setTimeout((function(){i.send()}),s):i.send()}}}function c(e,t){return"function"==typeof e&&(t=Array.prototype.slice.call(arguments),e=e.apply(null,t.slice(1))),e}function f(e,t){setTimeout(e.bind(t),0)}function d(e,t){return h(arguments,(function(t){t!==e&&h(t,(function(t,s){e[s]=t}))})),e}function h(e,t,s){var i;if(e)if(void 0!==e.length){for(i=0;i<e.length;i++)if(!1===t.call(s,e[i],i))return}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(s,e[i],i))return}}("undefined"!=typeof window&&window,"undefined"!=typeof document&&document)},84:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var i=s(537),r=s.n(i),n=s(645),o=s.n(n)()(r());o.push([e.id,"div.dash-uploader-button-container {\n    display: block;\n}\n\nlabel.dash-uploader-label {\n    font-family: Arial, Helvetica, sans-serif;\n}\n\n.dash-uploader-progress-value {\n    font-family: Arial, Helvetica, sans-serif;\n}","",{version:3,sources:["webpack://./src/lib/components/uploader.css"],names:[],mappings:"AAAA;IACI,cAAc;AAClB;;AAEA;IACI,yCAAyC;AAC7C;;AAEA;IACI,yCAAyC;AAC7C",sourcesContent:["div.dash-uploader-button-container {\n    display: block;\n}\n\nlabel.dash-uploader-label {\n    font-family: Arial, Helvetica, sans-serif;\n}\n\n.dash-uploader-progress-value {\n    font-family: Arial, Helvetica, sans-serif;\n}"],sourceRoot:""}]);const a=o},645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var s="",i=void 0!==t[5];return t[4]&&(s+="@supports (".concat(t[4],") {")),t[2]&&(s+="@media ".concat(t[2]," {")),i&&(s+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),s+=e(t),i&&(s+="}"),t[2]&&(s+="}"),t[4]&&(s+="}"),s})).join("")},t.i=function(e,s,i,r,n){"string"==typeof e&&(e=[[null,e,void 0]]);var o={};if(i)for(var a=0;a<this.length;a++){var l=this[a][0];null!=l&&(o[l]=!0)}for(var u=0;u<e.length;u++){var p=[].concat(e[u]);i&&o[p[0]]||(void 0!==n&&(void 0===p[5]||(p[1]="@layer".concat(p[5].length>0?" ".concat(p[5]):""," {").concat(p[1],"}")),p[5]=n),s&&(p[2]?(p[1]="@media ".concat(p[2]," {").concat(p[1],"}"),p[2]=s):p[2]=s),r&&(p[4]?(p[1]="@supports (".concat(p[4],") {").concat(p[1],"}"),p[4]=r):p[4]="".concat(r)),t.push(p))}},t}},537:e=>{"use strict";e.exports=function(e){var t=e[1],s=e[3];if(!s)return t;if("function"==typeof btoa){var i=btoa(unescape(encodeURIComponent(JSON.stringify(s)))),r="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(i),n="/*# ".concat(r," */"),o=s.sources.map((function(e){return"/*# sourceURL=".concat(s.sourceRoot||"").concat(e," */")}));return[t].concat(o).concat([n]).join("\n")}return[t].join("\n")}},379:e=>{"use strict";var t=[];function s(e){for(var s=-1,i=0;i<t.length;i++)if(t[i].identifier===e){s=i;break}return s}function i(e,i){for(var n={},o=[],a=0;a<e.length;a++){var l=e[a],u=i.base?l[0]+i.base:l[0],p=n[u]||0,c="".concat(u," ").concat(p);n[u]=p+1;var f=s(c),d={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==f)t[f].references++,t[f].updater(d);else{var h=r(d,i);i.byIndex=a,t.splice(a,0,{identifier:c,updater:h,references:1})}o.push(c)}return o}function r(e,t){var s=t.domAPI(t);return s.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;s.update(e=t)}else s.remove()}}e.exports=function(e,r){var n=i(e=e||[],r=r||{});return function(e){e=e||[];for(var o=0;o<n.length;o++){var a=s(n[o]);t[a].references--}for(var l=i(e,r),u=0;u<n.length;u++){var p=s(n[u]);0===t[p].references&&(t[p].updater(),t.splice(p,1))}n=l}}},569:e=>{"use strict";var t={};e.exports=function(e,s){var i=function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(e){s=null}t[e]=s}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(s)}},216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,s)=>{"use strict";e.exports=function(e){var t=s.nc;t&&e.setAttribute("nonce",t)}},795:e=>{"use strict";e.exports=function(e){var t=e.insertStyleElement(e);return{update:function(s){!function(e,t,s){var i="";s.supports&&(i+="@supports (".concat(s.supports,") {")),s.media&&(i+="@media ".concat(s.media," {"));var r=void 0!==s.layer;r&&(i+="@layer".concat(s.layer.length>0?" ".concat(s.layer):""," {")),i+=s.css,r&&(i+="}"),s.media&&(i+="}"),s.supports&&(i+="}");var n=s.sourceMap;n&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(n))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,s)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function s(i){var r=t[i];if(void 0!==r)return r.exports;var n=t[i]={id:i,loaded:!1,exports:{}};return e[i](n,n.exports,s),n.loaded=!0,n.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var i in t)s.o(t,i)&&!s.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var i={};(()=>{"use strict";s.r(i),s.d(i,{Upload_ReactComponent:()=>Z});const e=window.React;var t=s.n(e),r=s(268),n=s.n(r);const o=window.PropTypes;var a=s.n(o);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function u(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function c(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&p(e,t)}(a,e);var s,i,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(r);if(n){var s=f(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return c(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return s=a,(i=[{key:"render",value:function(){return t().createElement("button",{style:{cursor:this.props.isUploading?"pointer":"default"},disabled:this.props.disabled,className:this.props.btnClass+" btn btn-sm btn-dash-uploader",onClick:this.props.onClick},this.props.text)}}])&&u(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),a}(e.Component);d.propTypes={text:a().string,btnClass:a().string,onClick:a().func,disabled:a().bool,isUploading:a().bool},d.defaultProps={text:"",btnClass:"dash-uploader-btn",onClick:function(){},disabled:!1,isUploading:!1};const h=d;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function v(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function m(e,t){return m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},m(e,t)}function g(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function y(e){return y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},y(e)}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&m(e,t)}(a,e);var s,i,r,n,o=(r=a,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=y(r);if(n){var s=y(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return g(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),o.call(this,e)}return s=a,(i=[{key:"render",value:function(){return t().createElement("div",{className:"progress",style:{display:this.props.isUploading?"flex":"none",textAlign:"center",marginTop:"10px",marginBottom:"10px"}},t().createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated",style:{width:this.props.progressBar+"%",height:"100%"}},t().createElement("span",{className:"dash-uploader-progress-value",style:{color:"white"}},this.props.progressBar.toFixed(2)+"%")))}}])&&v(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),a}(e.Component);w.propTypes={progressBar:a().number,isUploading:a().bool},w.defaultProps={progressBar:0,isUploading:!1};const S=w;var O=s(379),k=s.n(O),j=s(795),C=s.n(j),x=s(569),F=s.n(x),U=s(565),E=s.n(U),P=s(216),A=s.n(P),z=s(589),B=s.n(z),T=s(84),R={};function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var s=0,i=new Array(t);s<t;s++)i[s]=e[s];return i}function N(e,t){for(var s=0;s<t.length;s++){var i=t[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function D(e,t){return D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},D(e,t)}function M(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return L(e)}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function q(e){return e/1048576}R.styleTagTransform=B(),R.setAttributes=E(),R.insert=F().bind(null,"head"),R.domAPI=C(),R.insertStyleElement=A(),k()(T.Z,R),T.Z&&T.Z.locals&&T.Z.locals;var Z=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");Object.defineProperty(e,"prototype",{value:Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),writable:!1}),t&&D(e,t)}(l,e);var s,i,r,o,a=(r=l,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=H(r);if(o){var s=H(this).constructor;e=Reflect.construct(t,arguments,s)}else e=t.apply(this,arguments);return M(this,e)});function l(e){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(s=a.call(this,e)).checkFileExtensionIsOk=function(e){if(null==s.props.filetypes)return!0;if(-1!=e.name.indexOf(".")){var t=e.name.split(".").pop();return s.props.filetypes.includes(t)}return s.props.filetypes.includes("")},s.checkFilesAreOkayToBeUploaded=function(e){if(s.debug&&console.log("checkFilesAreOkayToBeUploaded"),void 0!==s.props.maxFiles&&e.length>s.props.maxFiles)return alert("Trop de fichiers sélectionnés ! Le nombre maximum de fichiers attendu est "+s.props.maxFiles.toString()+"."),!1;if(void 0!==s.props.maxTotalSize){var t=0;if(s.flow.files.forEach((function(e){t+=e.size}),L(s)),t>s.props.maxTotalSize)return alert("Taille totale trop importante ("+q(t).toFixed(1)+" Mo) ! La limite est : "+q(s.props.maxTotalSize).toFixed(1)+" Mo"),!1}return!0},s.onProgress=function(){var e=q(s.flow.sizeUploaded()).toFixed(2)+" Mb",t="";s.props.totalFilesCount>1?e+=", File "+(s.props.uploadedFileNames.length+1).toString()+"/"+s.props.totalFilesCount.toString():t=s.flow.files[0].name+" ",s.setState({messageStatus:"Uploading "+t+"("+e+")",progressBar:100*s.flow.progress()})},s.onComplete=function(){s.debug&&console.log("onComplete"),s.state.uploadedFiles.forEach((function(e){this.flow.removeFile(e)}),L(s)),s.setState({isUploading:!1,showEnabledButtons:!1,messageStatus:""}),setTimeout((function(){s.setState({progressBar:0})}),600)},s.removeAllFilesFromFlow=function(){for(;s.flow.files.length>0;)s.flow.removeFile(s.flow.files[0])},s.fileSuccess=function(e,t,i){s.debug&&console.log("fileSuccess:",e,t,i),e.fileName=t;var r=s.state.uploadedFiles;r.push(e);var n=s.props.uploadedFileNames;n.push(e.fileName),s.props.setProps&&s.props.setProps({dashAppCallbackBump:s.props.dashAppCallbackBump+1,uploadedFileNames:n,uploadedFilesSize:q(s.flow.sizeUploaded()),totalFilesSize:q(s.flow.getSize())}),s.setState({uploadedFiles:r,messageStatus:s.props.completedMessage+e.fileName}),s.props.setProps({text:s.props.completedMessage+e.fileName})},s.fileError=function(e,t){s.debug&&console.log("fileError",e,t),s.debug&&console.log("fileError with flow.js! (file, message)",e,t),alert("Une erreur a eu lieu au téléversement du fichier "+e.relativePath+" !\nDétails : "+t),s.cancelUpload()},s.removeUnsupportedFileTypesFromQueue=function(){var e=0,t=[];s.flow.files.forEach((function(s){this.debug&&console.log("Checking filetype for file",s),this.checkFileExtensionIsOk(s)||(this.debug&&console.log("Removing file as filetype is not supported",s),t.push(s),e+=1)}),L(s)),t.forEach((function(e){this.flow.removeFile(e)}),L(s)),1==e?alert("1 fichier n'a pas pu être téléversé, car son extension ne correspond pas au format attendu ! Les extensions attendues sont : ["+s.props.filetypes.join(", ")+"]"):e>1&&alert(e.toString()+" fichiers n'ont pas pu être téléversés, car leur extension ne correspond pas au format attendu ! Les extensions attendues sont : ["+s.props.filetypes.join(", ")+"]")},s.removeTooLargeFilesFromQueue=function(){var e=0,t=[];s.flow.files.forEach((function(s){s.size>this.props.maxFileSize&&(this.debug&&console.log("Removing file as it is too large",s),t.push(s),e+=1)}),L(s)),t.forEach((function(e){this.flow.removeFile(e)}),L(s)),1==e?alert("1 fichier n'a pas pu être téléversé, car sa taille est supérieure à la limite de "+q(s.props.maxFileSize).toFixed(1)+"Mo"):e>1&&alert(e.toString()+" fichiers n'ont pas pu être téléversés, car leur taille est supérieure à la limite de "+q(s.props.maxFileSize).toFixed(1)+"Mb")},s.onFilesSubmitted=function(e){s.debug&&console.log("onFilesSubmitted",e.length,e),s.removeUnsupportedFileTypesFromQueue(),s.removeTooLargeFilesFromQueue(),s.checkFilesAreOkayToBeUploaded(s.flow.files)?(s.props.setProps({dashAppCallbackBump:0,uploadedFileNames:[],totalFilesCount:s.flow.files.length,uploadedFilesSize:0,totalFilesSize:0}),s.setState({showEnabledButtons:!0}),s.flow.upload(),s.setState({isUploading:!0})):s.removeAllFilesFromFlow()},s.getLabel=function(){var e=s.props.text?s.props.text:null;return t().createElement("label",{style:{display:s.state.isUploading?"block":"inline-block",verticalAlign:"middle",lineHeight:"normal",width:s.state.isUploading?"auto":"100%",paddingRight:s.state.isUploading?"10px":"0",textAlign:"center",wordWrap:"break-word",cursor:s.state.isUploading?"default":"pointer",fontSize:s.state.isUploading?"10px":"inherit"},onMouseEnter:s.toggleHovered,onMouseLeave:s.toggleHovered,className:"dash-uploader-label"},""===s.state.messageStatus?e:s.state.messageStatus,t().createElement("input",{ref:function(e){return s.uploader=e},type:"file",className:"btn",name:s.props.id+"-upload",accept:s.props.filetypes?s.props.filetypes.map((function(e){return"."+e})).join(","):"*",disabled:s.state.isUploading||s.props.disabled,style:{opacity:"0",width:"0",height:"0",position:"absolute",overflow:"hidden",zIndex:"-1"}}))},s.state=l.initialState,s.toggleHovered=s.toggleHovered.bind(L(s)),s.cancelUpload=s.cancelUpload.bind(L(s)),s.pauseUpload=s.pauseUpload.bind(L(s)),s.startUpload=s.startUpload.bind(L(s)),s.createButton=s.createButton.bind(L(s)),s.flow=null,s.debug=!1,s}return s=l,(i=[{key:"resetBuilder",value:function(){this.setState(l.initialState)}},{key:"componentDidMount",value:function(){var e=new(n())({target:this.props.service,query:{upload_id:this.props.upload_id},chunkSize:this.props.chunkSize,simultaneousUploads:this.props.simultaneousUploads,headers:{},allowDuplicateUploads:!0,testChunks:!1});e.assignBrowse(this.uploader),!1===this.props.disableDragAndDrop&&!1===this.props.disabled&&e.assignDrop(this.dropZone),e.on("filesSubmitted",this.onFilesSubmitted),e.on("fileSuccess",this.fileSuccess),e.on("progress",this.onProgress),e.on("complete",this.onComplete),e.on("fileError",this.fileError),this.flow=e}},{key:"componentDidUpdate",value:function(e){var t=!1===e.disableDragAndDrop&&!1===e.disabled,s=!1===this.props.disableDragAndDrop&&!1===this.props.disabled;s!==t&&(s?this.flow.assignDrop(this.dropZone):this.flow.unAssignDrop(this.dropZone))}},{key:"cancelUpload",value:function(){this.flow.cancel(),this.resetBuilder(),this.setState({isUploading:!1})}},{key:"pauseUpload",value:function(){this.state.isPaused?(this.flow.resume(),this.setState({isPaused:!1})):(this.flow.pause(),this.setState({isPaused:!0}))}},{key:"startUpload",value:function(){this.setState({isPaused:!1,isUploading:!0,showEnabledButtons:!0})}},{key:"toggleHovered",value:function(){this.setState({isHovered:!this.state.isHovered})}},{key:"createButton",value:function(e,s,i,r,n){return this.state.showEnabledButtons&&i?t().createElement(h,{text:i&&s,btnClass:n,onClick:e,disabled:r,isUploading:this.state.isUploading}):null}},{key:"render",value:function(){var e,s,i=this,r=this.createButton(this.startUpload,"upload",this.props.startButton,this.state.isUploading,"dash-uploader-btn-start btn-outline-secondary "),n=this.createButton(this.cancelUpload,"cancel",this.props.cancelButton,!this.state.isUploading,"dash-uploader-btn-cancel btn-outline-secondary "),o=this.createButton(this.pauseUpload,this.state.isPaused?"resume":"pause",this.props.pauseButton,!this.state.isUploading,"dash-uploader-btn-pause btn-outline-primary ");return t().createElement("div",{style:i.state.isUploading?i.props.uploadingStyle:i.props.disabled?i.props.disabledStyle:i.state.isComplete?i.props.completeStyle:i.props.defaultStyle,id:this.props.id,className:(e=[i.props.className],s={isUploading:i.props.uploadingClass,isPaused:i.props.pausedClass,isHovered:i.props.hoveredClass,isComplete:i.props.completeClass},Object.entries(s).forEach((function(t){var s,r,n=(r=2,function(e){if(Array.isArray(e))return e}(s=t)||function(e,t){var s=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=s){var i,r,n=[],o=!0,a=!1;try{for(s=s.call(e);!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){a=!0,r=e}finally{try{o||null==s.return||s.return()}finally{if(a)throw r}}return n}}(s,r)||function(e,t){if(e){if("string"==typeof e)return I(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?I(e,t):void 0}}(s,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],a=n[1];i.state[o]&&e.push(a)})),i.props.disabled&&e.push(i.props.disabledClass),e.join(" ")),ref:function(e){return i.dropZone=e}},t().createElement("div",{id:this.props.id+"-padding",style:{padding:"10px"}},this.getLabel(),t().createElement(S,{isUploading:this.state.isUploading,progressBar:this.state.progressBar}),t().createElement("div",{className:"dash-uploader-button-container"},n,o,r)))}}])&&N(s.prototype,i),Object.defineProperty(s,"prototype",{writable:!1}),l}(e.Component);Z.initialState={progressBar:0,messageStatus:"",uploadedFiles:[],isPaused:!1,isUploading:!1,isHovered:!1,isComplete:!1,showEnabledButtons:!1,currentFile:""},Z.propTypes={setProps:a().func,maxFiles:a().number,maxFileSize:a().number,maxTotalSize:a().number,chunkSize:a().number,simultaneousUploads:a().number,service:a().string,className:a().string,hoveredClass:a().string,disabledClass:a().string,pausedClass:a().string,completedClass:a().string,uploadingClass:a().string,defaultStyle:a().object,disabledStyle:a().object,uploadingStyle:a().object,completeStyle:a().object,text:a().string,disabledMessage:a().string,completedMessage:a().string,uploadedFileNames:a().arrayOf(a().string),filetypes:a().arrayOf(a().string),startButton:a().bool,pauseButton:a().bool,cancelButton:a().bool,disabled:a().bool,disableDragAndDrop:a().bool,onUploadErrorCallback:a().func,id:a().string,dashAppCallbackBump:a().number,upload_id:a().string,totalFilesCount:a().number,uploadedFilesSize:a().number,totalFilesSize:a().number},Z.defaultProps={maxFiles:1,maxFileSize:10485760,chunkSize:1048576,simultaneousUploads:1,service:"/API/dash-uploader",className:"dash-uploader-default",hoveredClass:"dash-uploader-hovered",completedClass:"dash-uploader-completed",disabledClass:"dash-uploader-disabled",pausedClass:"dash-uploader-paused",uploadingClass:"dash-uploader-uploading",defaultStyle:{},uploadingStyle:{},completeStyle:{},text:"Click Here to Select a File",completedMessage:"Complete! ",uploadedFileNames:[],filetypes:void 0,startButton:!0,pauseButton:!0,cancelButton:!0,disableDragAndDrop:!1,id:"default-dash-uploader-id",onUploadErrorCallback:void 0,dashAppCallbackBump:0,upload_id:""}})(),window.dash_uploader=i})();
//# sourceMappingURL=dash_uploader.min.js.map